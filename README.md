# 만들려는거
## CCG 계열 게임 엔진 로직
1. 플레이어 2인+
2. 각 플레이어는 자신의 덱을 가지고 게임에 입장
3. 턴제로 게임 플레이, 그리고 게임 승리조건 만족시 결말
### 기술적 지향점
1. 게임의 전체 흐름을 시퀀스로 분리하여, 게임 진행을 언제든지 유지하고 불러와서 재개할 수 있도록 함
2. 게임의 현재 진행상황을 메모리 외에 DB 등에 저장하고 이에 따라 stateless하게 다음 동작을 판단할 수 있게 하여 실시간으로 처리하는것 대신에 아예 API 형태로도 동작할 수 있게끔
## 컨셉
### 팩션
* Politician
  * '질서 선' 캐릭터들의 팩션.
  * 기본적으로 룰에서 보장된 승리조건을 취함
  * 전투 위주의 팩션. 카드의 전체적인 전투 능력치가 높음
* Criminal
  * '질서 악'
  * HQ별로 특수 승리조건으로 '카드의 매수' 등과 관련된 요소를 가질 수 있음
  * 자원 관리에 특화, 커맨드를 통해 카드를 다량으로 뽑거나 할 수 있다. 대신 유닛의 효율이 낮음
* Anarchy
  * '혼돈 악'
  * 카드의 직접적인 파괴 공작에 특화
  * 리스크 있는 플레이를 할 수 있음
* Tricksters
  * '혼돈 선'
  * 필드를 지키고 빌드업 하는데에 특화
  * 필드를 구축하는 그 자체로 승리조건이 되는 HQ가 존재
## 게임 룰
### 준비물
#### 덱
1. HQ 카드 1장, 나머지 30장, 중복 카드는 3장까지. HQ 카드에 맞는 팩션의 카드들만 사용 가능
### 게임 카드 종류
#### HQ
덱의 세력 구성에 관여. 덱에 단 한장 존재한다.
* 가지고 있는 속성치
  * Faction : HQ의 팩션 (1개 이상)
  * SubType : HQ가 가지고 있는 특성 태그 (0개 이상)
  * Level : HQ의 레벨
  * Link : HQ에 연결하여 플레이 할 수 있는 공간의 갯수
  * Power Type : Offensive / Defensive / Wall (유닛과 공통, 유닛에서 설명)
  * Power : 전투가 발생할 때 얼마만큼의 대미지를 줄 수 있는지의 수치 (유닛과 공통, 유닛에서 설명)
  * HP : 게임이 시작할 때, 해당 수치를 가지고 게임을 시작하고, 대미지를 받으면 대미지의 양만큼 수치가 감소한다.
#### 유닛
#### 커맨드
### 게임 영역
#### 1. 덱 영역
* 게임 시작시에 준비한 덱의 카드들이 '덮음' 상태로 존재하는 영역
* 모든 플레이어가 내용을 볼 수 없다.
#### 2. 필드
* 카드(GameCardObject)가 실질적으로 놓이는 장소
* 카드들은 필드에 놓일 때 '액티브'(테이블탑에서, '언탭' 같은 형태), '인액티브'(테이블탑에서, '탭' 같은 형태) 상태를 가진다.
#### 3. 손패
#### 4. 트래시
#### 5. 효과처리 대기영역
* 처리해야 할 효과가 남아있다면 이 곳에 쌓임. 이 효과 해결 전에는 사용자의 다음 행동을 기다리지 않고 자동으로 처리하고 빈 상태에서만 처리한다.
#### 6. 크레딧
* 사용할 수 있는 플레이어의 크레딧
### 게임의 목표
1. (패배조건) 내 HQ의 HP가 0 이하가 됨
2. (패배조건) 내 덱의 장수가 0인 상태에서 드로우
3. 기타 카드에 명시된 게임 조건
### 게임 시작
1. 무작위로 모든 플레이어의 턴 순서를 결정
2. 덱을 셔플하고 3장 드로우
3. 각 플레이어의 HQ 카드가 필드에 놓인 채로 시작
4. 선공 플레이어부터 1턴
#### 턴 흐름
스타트 페이즈 -> 드로우 페이즈 -> 메인 페이즈 -> 엔드 페이즈
* 공통행동 : '상태확인행동'
  * 아래의 상황에서 발생한다.
    * 페이즈 시작시 턴 행동 직후
    * 효과처리 대기영역의 효과 1개가 해결될때마다
    * 플레이어의 액션 선언 직후
  * 발생시 아래의 상태를 확인하고 처리한다.
    * 게임의 패배조건이 충족하였는지 확인하여, 게임의 결과를 결정한다.
      * 패배조건이 동시에 충족되는 경우, 게임을 무승부로 한다.
    * 현재 Power 이상의 대미지가 쌓여있는 유닛들을 파괴한다.
    * 아래의 과정에서 더이상 트래시에 보낼 것이 없어질때까지 반복한다.
      * 필드에 남아있는 모든 유닛들 중, HQ에서 도달할 수 없는 유닛을 파괴한다.
      * 필드에 남아있는 모든 커맨드 중, HQ에서 도달할 수 없는 커맨드를 트래시로 이동한다.

##### 스타트 페이즈
* 턴 행동
  * 턴 플레이어의 필드에 남아있는 커맨드들을 전부 트래시로 이동
  * 턴 플레이어의 필드에 있는 모든 유닛의 대미지가 제거
  * 턴 플레이어의 필드의 객체들의 인액티브 상태가 액티브로 모두 변경
  * 게임 내의 효과들 중 '스타트 페이즈 시작시에' 라고 명시된 효과들이 효과처리 대기영역으로 생성하여 이동.
##### 드로우 페이즈
* 턴 행동
  * 현행 턴의 주인(TurnOwner)은 '카드 1장 드로우'를 수행.
  * '드로우 페이즈 시작시에', '드로우 할때마다' 라고 명시된 효과들이 효과처리 대기영역으로 생성하여 이동.
##### 메인 페이즈
##### 엔드 페이즈
##### 턴 종료
* 다음 플레이어가 턴을 이어받는다.
